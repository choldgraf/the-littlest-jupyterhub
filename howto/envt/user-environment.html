
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Install conda, pip or apt packages &#8212; The Littlest JupyterHub v0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" type="text/css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Change default User Interface for users" href="notebook-interfaces.html" />
    <link rel="prev" title="Share data with your users" href="../content/share-data.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="install-conda-pip-or-apt-packages">
<span id="howto-envt-user-environment"></span><h1>Install conda, pip or apt packages<a class="headerlink" href="#install-conda-pip-or-apt-packages" title="Permalink to this headline">¶</a></h1>
<p><abbr title="The Littlest JupyterHub">TLJH</abbr> starts all users in the same <a class="reference external" href="https://conda.io/docs/">conda</a>
environment. Packages / libraries installed in this environment are available
to all users on the JupyterHub. Users with <a class="reference internal" href="../admin/admin-users.html#howto-admin-admin-users"><span class="std std-ref">admin rights</span></a> can install packages
easily.</p>
<div class="section" id="installing-pip-packages">
<span id="howto-envt-user-environment-pip"></span><h2>Installing pip packages<a class="headerlink" href="#installing-pip-packages" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://pypi.org/project/pip/">pip</a> is the recomended tool for installing packages
in Python from the <a class="reference external" href="https://pypi.org/">Python Packaging Index (PyPI)</a>. PyPI has
almost 145,000 packages in it right now, so a lot of what you need is going to be there!</p>
<ol class="arabic">
<li><p class="first">Log in as an admin user and open a Terminal in your Jupyter Notebook.</p>
<img alt="New Terminal button under New menu" src="../../_images/new-terminal-button2.png" />
<p>If you already have a terminal open as an admin user, that should work too!</p>
</li>
<li><p class="first">Install a package!</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo -E pip install numpy
</pre></div>
</div>
<p>This installs the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> library from PyPI and makes it available
to all users.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you get an error message like <code class="docutils literal notranslate"><span class="pre">sudo:</span> <span class="pre">pip:</span> <span class="pre">command</span> <span class="pre">not</span> <span class="pre">found</span></code>,
make sure you are not missing the <code class="docutils literal notranslate"><span class="pre">-E</span></code> parameter after <code class="docutils literal notranslate"><span class="pre">sudo</span></code>.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="installing-conda-packages">
<span id="howto-envt-user-environment-conda"></span><h2>Installing conda packages<a class="headerlink" href="#installing-conda-packages" title="Permalink to this headline">¶</a></h2>
<p>Conda lets you install new languages (such as new versions of python, node, R, etc)
as well as packages in those languages. For lots of scientific software, installing
with conda is often simpler &amp; easier than installing with pip - especially if it
links to C / Fortran code.</p>
<p>We recommend installing packages from <a class="reference external" href="https://conda-forge.org/">conda-forge</a>,
a community maintained repository of  conda packages.</p>
<ol class="arabic">
<li><p class="first">Log in as an admin user and open a Terminal in your Jupyter Notebook.</p>
<img alt="New Terminal button under New menu" src="../../_images/new-terminal-button2.png" />
<p>If you already have a terminal open as an admin user, that should work too!</p>
</li>
<li><p class="first">Install a package!</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo -E conda install -c conda-forge gdal
</pre></div>
</div>
<p>This installs the <code class="docutils literal notranslate"><span class="pre">gdal</span></code> library from <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> and makes it available
to all users. <code class="docutils literal notranslate"><span class="pre">gdal</span></code> is much harder to install with pip.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you get an error message like <code class="docutils literal notranslate"><span class="pre">sudo:</span> <span class="pre">conda:</span> <span class="pre">command</span> <span class="pre">not</span> <span class="pre">found</span></code>,
make sure you are not missing the <code class="docutils literal notranslate"><span class="pre">-E</span></code> parameter after <code class="docutils literal notranslate"><span class="pre">sudo</span></code>.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="installing-apt-packages">
<span id="howto-envt-user-environment-apt"></span><h2>Installing apt packages<a class="headerlink" href="#installing-apt-packages" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://help.ubuntu.com/lts/serverguide/apt.html.en">apt</a> is the official package
manager for the <a class="reference external" href="https://www.ubuntu.com/">Ubuntu Linux distribution</a>. You can install
utilities (such as <code class="docutils literal notranslate"><span class="pre">vim</span></code>, <code class="docutils literal notranslate"><span class="pre">sl</span></code>, <code class="docutils literal notranslate"><span class="pre">htop</span></code>, etc), servers (<code class="docutils literal notranslate"><span class="pre">postgres</span></code>, <code class="docutils literal notranslate"><span class="pre">mysql</span></code>, <code class="docutils literal notranslate"><span class="pre">nginx</span></code>, etc)
and a lot more languages than present in <code class="docutils literal notranslate"><span class="pre">conda</span></code> (<code class="docutils literal notranslate"><span class="pre">haskell</span></code>, <code class="docutils literal notranslate"><span class="pre">prolog</span></code>, <code class="docutils literal notranslate"><span class="pre">INTERCAL</span></code>).
Some third party software (such as <a class="reference external" href="https://www.rstudio.com/products/rstudio/download/">RStudio</a>)
is distributed as <code class="docutils literal notranslate"><span class="pre">.deb</span></code> files, which are the files <code class="docutils literal notranslate"><span class="pre">apt</span></code> uses to install software.</p>
<p>You can search for packages with <a class="reference external" href="https://packages.ubuntu.com/">Ubuntu Package search</a> -
make sure to look in the version of Ubuntu you are using!</p>
<ol class="arabic">
<li><p class="first">Log in as an admin user and open a Terminal in your Jupyter Notebook.</p>
<img alt="New Terminal button under New menu" src="../../_images/new-terminal-button2.png" />
<p>If you already have a terminal open as an admin user, that should work too!</p>
</li>
<li><p class="first">Update list of packages available. This makes sure you get the latest version of
the packages possible from the repositories.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt update
</pre></div>
</div>
</li>
<li><p class="first">Install the packages you want.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install mysql-server git
</pre></div>
</div>
<p>This installs (and starts) a <code class="docutils literal notranslate"><span class="pre">MySQL</span> <span class="pre">&lt;https://www.mysql.com/&gt;</span></code> database server
and <code class="docutils literal notranslate"><span class="pre">git</span></code>.</p>
</li>
</ol>
</div>
<div class="section" id="user-environment-location">
<h2>User environment location<a class="headerlink" href="#user-environment-location" title="Permalink to this headline">¶</a></h2>
<p>The user environment is a conda enviornment set up in <code class="docutils literal notranslate"><span class="pre">/opt/tljh/user</span></code>, with
a Python3 kernel as the default. It is readable by all users, but writeable only
by users who have root access. This makes it possible for JupyterHub admins (who have
root access with <code class="docutils literal notranslate"><span class="pre">sudo</span></code>) to install software in the user environment easily.</p>
</div>
<div class="section" id="accessing-user-environment-outside-jupyterhub">
<h2>Accessing user environment outside JupyterHub<a class="headerlink" href="#accessing-user-environment-outside-jupyterhub" title="Permalink to this headline">¶</a></h2>
<p>We add <code class="docutils literal notranslate"><span class="pre">/opt/tljh/user/bin</span></code> to the <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> environment variable for all JupyterHub
users, so everything installed in the user environment is available to them automatically.
If you are using <code class="docutils literal notranslate"><span class="pre">ssh</span></code> to access your server instead, you can get access to the same
environment with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/opt/tljh/user/bin:<span class="si">${</span><span class="nv">PATH</span><span class="si">}</span>
</pre></div>
</div>
<p>Whenever you run any command now, the user environment will be searched first before
your system environment is. So if you run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">&lt;somefile&gt;</span></code>, it’ll use the <code class="docutils literal notranslate"><span class="pre">python3</span></code>
installed in the user environment (<code class="docutils literal notranslate"><span class="pre">/opt/tljh/user/bin/python3</span></code>) rather than the <code class="docutils literal notranslate"><span class="pre">python3</span></code>
installed in your system environment (<code class="docutils literal notranslate"><span class="pre">/usr/bin/python3</span></code>). This is usually what you want!</p>
<p>To make this change ‘stick’, you can add the line to the end of the <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file in
your home directory.</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">sudo</span></code>, the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable is usually reset, for security
reasons. This leads to error messages like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo conda install -c conda-forge gdal
<span class="go">sudo: conda: command not found</span>
</pre></div>
</div>
<p>The most common &amp; portable way to fix this when using <code class="docutils literal notranslate"><span class="pre">ssh</span></code> is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo <span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span> conda install -c conda-forge gdal
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">The Littlest JupyterHub</a></h1>



<p class="blurb">
    A simple JupyterHub distribution for 1-100 users
    <br /> <br />
    <strong>Documentation confusing?</strong> <a href="https://github.com/jupyterhub/the-littlest-jupyterhub/issues">File an issue!</a>
    </p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=jupyterhub&repo=the-littlest-jupyterhub&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../content/share-data.html" title="previous chapter">Share data with your users</a></li>
      <li>Next: <a href="notebook-interfaces.html" title="next chapter">Change default User Interface for users</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, JupyterHub Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../../_sources/howto/envt/user-environment.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/jupyterhub/the-littlest-jupyterhub" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>