
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Installing on Google Cloud &#8212; The Littlest JupyterHub v0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" type="text/css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installing on your own server" href="custom-server.html" />
    <link rel="prev" title="Installing on Jetstream" href="jetstream.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installing-on-google-cloud">
<span id="install-google"></span><h1>Installing on Google Cloud<a class="headerlink" href="#installing-on-google-cloud" title="Permalink to this headline">¶</a></h1>
<div class="section" id="goal">
<h2>Goal<a class="headerlink" href="#goal" title="Permalink to this headline">¶</a></h2>
<p>By the end of this tutorial, you should have a JupyterHub with some admin
users and a user environment with packages you want installed running on
<a class="reference external" href="https://cloud.google.com/">Google Cloud</a>.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>A Google Cloud account. You might use the free credits for trying it out!</li>
</ol>
</div>
<div class="section" id="step-1-installing-the-littlest-jupyterhub">
<h2>Step 1: Installing The Littlest JupyterHub<a class="headerlink" href="#step-1-installing-the-littlest-jupyterhub" title="Permalink to this headline">¶</a></h2>
<p>Let’s create the server on which we can run JupyterHub.</p>
<ol class="arabic">
<li><p class="first">Log in to <a class="reference external" href="https://console.cloud.google.com">Google Cloud Console</a> with
your Google Account.</p>
</li>
<li><p class="first">Open the navigation menu by clicking the button with three lines on the top
left corner of the page.</p>
<img alt="Button to open the menu" src="../_images/left-menu-button.png" />
<p>This opens a menu with all the cloud products Google Cloud offers.</p>
</li>
<li><p class="first">Under <strong>Compute Engine</strong>, select <strong>VM Instances</strong>.</p>
<img alt="Navigation Menu -&gt; Compute Engine -&gt; VM Instances" src="../_images/vm-instances-menu.png" />
</li>
<li><p class="first">If you are using Google Cloud for the first time, you might have to
enable billing. Google will present a screen asking you to enable billing
to proceed. Click the <strong>Enable Billing</strong> button and follow any prompts
that appear.</p>
<img alt="Enable billing if needed." src="../_images/enable-billing.png" />
<p>It might take a few minutes for your account to be set up.</p>
</li>
<li><p class="first">Once Compute Engine is ready, click the <strong>Create</strong> button to start
creating the server that’ll run TLJH.</p>
<img alt="Create VM page when using it for the first time." src="../_images/create-vm-first.png" />
<p>If you already have VMs running in your project, the screen will look
different. But you can find the <strong>Create</strong> button still!</p>
</li>
<li><p class="first">This shows you a page titled <strong>Create an instance</strong>. This lets you customize
the kind of server you want, the resources it will have &amp; what it’ll be called.</p>
</li>
<li><p class="first">Under <strong>Name</strong>, give it a memorable name that identifies what purpose this
JupyterHub will be used for.</p>
</li>
<li><p class="first"><strong>Region</strong> specifies the physical location where this server will be hosted.
Generally, pick something close to where most of your users are. Note that
it might increase the cost of your server in some cases!</p>
</li>
<li><p class="first">For <strong>Zone</strong>, pick any of the options. Leaving the default as is is fine.</p>
</li>
<li><p class="first">Under <strong>Machine</strong> type, select the amount of CPU / RAM / GPU you want for your
server.</p>
<p>You can select a preset combination in the default <strong>basic view</strong>.</p>
<img alt="Select a preset VM type" src="../_images/machine-type-basic.png" />
<p>If you want to add <strong>GPUs</strong>, you should click the <strong>Customize</strong> button &amp;
use the <strong>Advanced View</strong>. You need to request <a class="reference external" href="https://cloud.google.com/compute/quotas#gpus">a quota increase</a>
before you can use GPUs.</p>
<img alt="Select a customized VM size" src="../_images/machine-type-advanced.png" />
<p>Check out our guide on How To <a class="reference internal" href="../howto/admin/resource-estimation.html#howto-admin-resource-estimation"><span class="std std-ref">Estimate Memory / CPU / Disk needed</span></a> to help pick
how much Memory / CPU your server needs.</p>
</li>
<li><p class="first">Under <strong>Boot Disk</strong>, click the <strong>Change</strong> button. This lets us change the
operating system and the size of your disk.</p>
<img alt="Changing Boot Disk &amp; disk size" src="../_images/boot-disk-button.png" />
<p>This should open a <strong>Boot disk</strong> popup.</p>
</li>
<li><p class="first">Select <strong>Ubuntu 18.04 LTS</strong> from the list of operating system images.</p>
<img alt="Selecting Ubuntu 18.04 for OS" src="../_images/boot-disk-ubuntu.png" />
</li>
<li><p class="first">You can also change the <strong>type</strong> and <strong>size</strong> of your disk at the bottom
of this popup.</p>
<img alt="Selecting Boot disk type &amp; size" src="../_images/boot-disk-size.png" />
<p><strong>Standard persistent disk</strong> type gives you a slower but cheaper disk, similar
to a hard drive. <strong>SSD persistent disk</strong> gives you a faster but more expensive
disk, similar to an SSD.</p>
<p>Check out our guide on How To <a class="reference internal" href="../howto/admin/resource-estimation.html#howto-admin-resource-estimation"><span class="std std-ref">Estimate Memory / CPU / Disk needed</span></a> to help pick
how much Disk space your server needs.</p>
</li>
<li><p class="first">Click the <strong>Select</strong> button to dismiss the Boot disk popup and go back to the
Create an instance screen.</p>
</li>
<li><p class="first">Under <strong>Identity and API access</strong>, select <strong>No service account</strong> for the
<strong>Service account</strong> field. This prevents your JupyterHub users from automatically
accessing other cloud services, increasing security.</p>
<img alt="Disable service accounts for the server" src="../_images/no-service-account.png" />
</li>
<li><p class="first">Under <strong>Firewall</strong>, check both <strong>Allow HTTP Traffic</strong> and <strong>Allow HTTPS Traffic</strong>
checkboxes.</p>
<img alt="Allow HTTP &amp; HTTPS traffic to your server" src="../_images/firewall.png" />
</li>
<li><p class="first">Click the <strong>Management, disks, networking, SSH keys</strong> link to expand more
options.</p>
<img alt="Expand management options by clicking link." src="../_images/management-button.png" />
<p>This displays a lot of advanced options, but we’ll be only using one of them.</p>
</li>
<li><p class="first">Copy the text below, and paste it into the <strong>Starup script</strong> text box. Replace
<code class="docutils literal notranslate"><span class="pre">&lt;admin-user-name&gt;</span></code> with the name of the first <strong>admin user</strong> for this
JupyterHub. This admin user can log in after the JupyterHub is set up, and
can configure it to their needs. <strong>Remember to add your username</strong>!</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
curl https://raw.githubusercontent.com/jupyterhub/the-littlest-jupyterhub/master/bootstrap/bootstrap.py <span class="se">\</span>
  <span class="p">|</span> sudo python3 - <span class="se">\</span>
    --admin &lt;admin-user-name&gt;
</pre></div>
</div>
<img alt="Install JupyterHub with the Startup script textbox" src="../_images/startup-script.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference internal" href="../topic/installer-actions.html#topic-installer-actions"><span class="std std-ref">What does the installer do?</span></a> if you want to understand exactly what the installer is doing.
<a class="reference internal" href="../topic/customizing-installer.html#topic-customizing-installer"><span class="std std-ref">Customizing the Installer</span></a> documents other options that can be passed to the installer.</p>
</div>
</li>
<li><p class="first">Click the <strong>Create</strong> button at the bottom to start your server!</p>
<img alt="Launch an Instance / Advanced Options dialog box" src="../_images/create-vm-button.png" />
</li>
<li><p class="first">We’ll be sent to the <strong>VM instances</strong> page, where we can see that our server
is being created.</p>
<img alt="Spinner with vm creating" src="../_images/vm-creating.png" />
</li>
<li><p class="first">In a few seconds your server will be created, and you can see the <strong>External IP</strong>
used to access it.</p>
<img alt="VM created, external IP available" src="../_images/vm-created.png" />
</li>
<li><p class="first">The Littlest JupyterHub is now installing in the background on your new server.
It takes around 5-10 minutes for this installation to complete.</p>
</li>
<li><p class="first">Check if the installation is complete by <strong>copying</strong> the <strong>External IP</strong>
of your server, and trying to access it with a browser. Do <strong>not click</strong> on the
IP - this will open the link with HTTPS, and will not work.</p>
<p>Accessing the JupyterHub will also fail until the installation is complete,
so be patient.</p>
</li>
<li><p class="first">When the installation is complete, it should give you a JupyterHub login page.</p>
<img alt="JupyterHub log-in page" src="../_images/first-login.png" />
</li>
<li><p class="first">Login using the <strong>admin user name</strong> you used in step 6, and a password. Use a
strong password &amp; note it down somewhere, since this will be the password for
the admin user account from now on.</p>
</li>
<li><p class="first">Congratulations, you have a running working JupyterHub!</p>
</li>
</ol>
</div>
<div class="section" id="step-2-adding-more-users">
<h2>Step 2: Adding more users<a class="headerlink" href="#step-2-adding-more-users" title="Permalink to this headline">¶</a></h2>
<p>Most administration &amp; configuration of the JupyterHub can be done from the
web UI directly. Let’s add a few users who can log in!</p>
<ol class="arabic">
<li><p class="first">Open the <strong>Control Panel</strong> by clicking the control panel button on the top
right of your JupyterHub.</p>
<img alt="Control panel button in notebook, top right" src="../_images/control-panel-button1.png" />
</li>
<li><p class="first">In the control panel, open the <strong>Admin</strong> link in the top left.</p>
<img alt="Admin button in control panel, top left" src="../_images/admin-access-button1.png" />
<p>This opens up the JupyterHub admin page, where you can add / delete users,
start / stop peoples’ servers and see who is online.</p>
</li>
<li><p class="first">Click the <strong>Add Users</strong> button.</p>
<img alt="Add Users button in the admin page" src="../_images/add-users-button1.png" />
<p>A <strong>Add Users</strong> dialog box opens up.</p>
</li>
<li><p class="first">Type the names of users you want to add to this JupyterHub in the dialog box,
one per line.</p>
<img alt="Adding users with add users dialog" src="../_images/add-users-dialog1.png" />
<p>You can tick the <strong>Admin</strong> checkbox if you want to give admin rights to all
these users too.</p>
</li>
<li><p class="first">Click the <strong>Add Users</strong> button in the dialog box. Your users are now added
to the JupyterHub! When they log in for the first time, they can set their
password - and use it to log in again in the future.</p>
</li>
</ol>
<p>Congratulations, you now have a multi user JupyterHub that you can add arbitrary
users to!</p>
</div>
<div class="section" id="step-3-install-conda-pip-packages-for-all-users">
<h2>Step 3: Install conda / pip packages for all users<a class="headerlink" href="#step-3-install-conda-pip-packages-for-all-users" title="Permalink to this headline">¶</a></h2>
<p>The <strong>User Environment</strong> is a conda environment that is shared by all users
in the JupyterHub. Libraries installed in this environment are immediately
available to all users. Admin users can install packages in this environment
with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-E</span></code>.</p>
<ol class="arabic">
<li><p class="first">Log in as an admin user and open a Terminal in your Jupyter Notebook.</p>
<img alt="New Terminal button under New menu" src="../_images/new-terminal-button3.png" />
</li>
<li><p class="first">Install <a class="reference external" href="https://anaconda.org/conda-forge/gdal">gdal</a> from <a class="reference external" href="https://conda-forge.org/">conda-forge</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo -E conda install -c conda-forge gdal
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-E</span></code> is very important!</p>
</li>
<li><p class="first">Install <code class="docutils literal notranslate"><span class="pre">there</span></code> with <code class="docutils literal notranslate"><span class="pre">pip</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo -E pip install there
</pre></div>
</div>
</li>
</ol>
<p>The packages <code class="docutils literal notranslate"><span class="pre">gdal</span></code> and <code class="docutils literal notranslate"><span class="pre">there</span></code> are now available to all users in JupyterHub.
If a user already had a python notebook running, they have to restart their notebook’s
kernel to make the new libraries available.</p>
<p>See <a class="reference internal" href="../howto/envt/user-environment.html#howto-envt-user-environment"><span class="std std-ref">Install conda, pip or apt packages</span></a> for more information.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Littlest JupyterHub</a></h1>



<p class="blurb">
    A simple JupyterHub distribution for 1-100 users
    <br /> <br />
    <strong>Documentation confusing?</strong> <a href="https://github.com/jupyterhub/the-littlest-jupyterhub/issues">File an issue!</a>
    </p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=jupyterhub&repo=the-littlest-jupyterhub&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="jetstream.html" title="previous chapter">Installing on Jetstream</a></li>
      <li>Next: <a href="custom-server.html" title="next chapter">Installing on your own server</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, JupyterHub Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/install/google.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/jupyterhub/the-littlest-jupyterhub" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>